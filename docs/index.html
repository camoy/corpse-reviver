<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html class="style"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Artifact: Corpse Reviver</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="style.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="figure.css" title="default"/><link rel="stylesheet" type="text/css" href="small-caps.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="figure.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Artifact:<span class="mywbr"> &nbsp;</span> Corpse Reviver</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._install%29" class="tocviewlink" data-pltdoc="x">Install</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._opt%29" class="tocviewlink" data-pltdoc="x">Optimizing a program</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._benchmark%29" class="tocviewlink" data-pltdoc="x">Benchmark</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._results%29" class="tocviewlink" data-pltdoc="x">Empirical results</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Artifact__.Corpse_.Reviver%29" class="tocsubseclink" data-pltdoc="x">Artifact:<span class="mywbr"> &nbsp;</span> Corpse Reviver</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._install%29" class="tocsubseclink" data-pltdoc="x">Install</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Virtual.Box%29" class="tocsubseclink" data-pltdoc="x">Virtual<span class="mywbr"> &nbsp;</span>Box</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Manual%29" class="tocsubseclink" data-pltdoc="x">Manual</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._opt%29" class="tocsubseclink" data-pltdoc="x">Optimizing a program</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._benchmark%29" class="tocsubseclink" data-pltdoc="x">Benchmark</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._results%29" class="tocsubseclink" data-pltdoc="x">Empirical results</a></td></tr><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#%28part._.Figures%29" class="tocsubseclink" data-pltdoc="x">Figures</a></td></tr><tr><td><span class="tocsublinknumber">4.2<tt>&nbsp;</tt></span><a href="#%28part._.Supporting_claims%29" class="tocsubseclink" data-pltdoc="x">Supporting claims</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">7.7.0.10</span></div><h2><a name="(part._.Artifact__.Corpse_.Reviver)"></a>Artifact: Corpse Reviver</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Cameron Moy</p><span class="SAuthorSep"><br/></span><p class="author">Ph&#250;c C. Nguy&#7877;n</p><span class="SAuthorSep"><br/></span><p class="author">Sam Tobin-Hochstadt</p><span class="SAuthorSep"><br/></span><p class="author">David Van Horn</p></span></div><p><div class="SIntrapara"></div><div class="SIntrapara"></div><div class="SIntrapara"></div><div class="SIntrapara"></div></p><p>This artifact accompanies the paper
<a href="https://arxiv.org/abs/2007.12630">&ldquo;Corpse Reviver: Sound and Efficient Gradual Typing via Contract Verification.&rdquo;</a>
Artifact evaluation phase I consists of
the <a href="#%28part._install%29" data-pltdoc="x">Install</a> and <a href="#%28part._opt%29" data-pltdoc="x">Optimizing a program</a> sections.
Artifact evaluation phase II consists of
the <a href="#%28part._benchmark%29" data-pltdoc="x">Benchmark</a> and <a href="#%28part._results%29" data-pltdoc="x">Empirical results</a> sections.</p><h3>1<tt>&nbsp;</tt><a name="(part._install)"></a>Install</h3><p>You can run the artifact in a VirtualBox virtual machine
that includes all the necessary dependencies.
We recommend this method of installation.
Alternatively,
you can manually install the artifact
on any Unix-like operating system.</p><h4>1.1<tt>&nbsp;</tt><a name="(part._.Virtual.Box)"></a>VirtualBox</h4><ul><li><p>Download <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox.</a></p></li><li><p>Download the artifact&rsquo;s <a href="https://zenodo.org/record/4072028/files/corpse-reviver-artifact.ova?download=1">virtual machine image</a>.</p></li><li><p>Open VirtualBox,
choose File &#8594; Import Appliance,
select the downloaded <span class="stt">ova</span> file,
and start the virtual machine.
The username and password are both <span class="RktInBG"><span class="hspace"></span><span class="RktIn">scvcr</span><span class="hspace"></span></span>.</p></li><li><p><div class="SIntrapara">Open a terminal window
and change to the artifact directory.
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">$ cd ~/corpse-reviver/corpse-reviver-artifact</span></p></td></tr></table></div></p></li></ul><h4>1.2<tt>&nbsp;</tt><a name="(part._.Manual)"></a>Manual</h4><ul><li><p>Install <a href="https://download.racket-lang.org/all-versions.html">Racket 7.8</a>.</p></li><li><p><div class="SIntrapara">Run the following commands to download and install SCV-CR:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">$ git clone https://github.com/camoy/corpse-reviver</span></p></td></tr><tr><td><p><span class="stt">$ raco pkg install corpse-reviver/corpse-reviver-artifact \</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">corpse-reviver/corpse-reviver-benchmark \</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">corpse-reviver/corpse-reviver</span></p></td></tr></table></div></p></li><li><p><div class="SIntrapara">Change to the artifact directory.
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">$ cd corpse-reviver/corpse-reviver-artifact</span></p></td></tr></table></div></p></li></ul><h3>2<tt>&nbsp;</tt><a name="(part._opt)"></a>Optimizing a program</h3><p>You can write your own gradually typed program
and see how well SCV-CR can optimize it.
Within the artifact directory there is an
<span class="stt">examples/</span> subdirectory with some files.
Change to this directory.
A file called <span class="stt">data.rkt</span> has the following code:</p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="http://docs.racket-lang.org/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="http://docs.racket-lang.org/ts-reference/index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">typed/racket/base</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._provide%29%29" class="RktStxLink" data-pltdoc="x">provide</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">random-adders</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~3a%29%29" class="RktStxLink" data-pltdoc="x">:</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">random-adders</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~3a%29%29" class="RktStxLink" data-pltdoc="x">:</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types-extra..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Natural%29%29" class="RktStxLink" data-pltdoc="x">Natural</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Listof%29%29" class="RktStxLink" data-pltdoc="x">Listof</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types-extra..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Integer%29%29" class="RktStxLink" data-pltdoc="x">Integer</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Integer%29%29" class="RktStxLink" data-pltdoc="x">Integer</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">random-adders</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._for%2Flist%29%29" class="RktStxLink" data-pltdoc="x">for/list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">i</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-range%29%29" class="RktValLink" data-pltdoc="x">in-range</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~ce~bb%29%29" class="RktStxLink" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~3a%29%29" class="RktStxLink" data-pltdoc="x">:</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Integer%29%29" class="RktStxLink" data-pltdoc="x">Integer</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._random%29%29" class="RktValLink" data-pltdoc="x">random</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3atyped-data))" x-target-lift="Figure"></a>Figure&nbsp;1: </span>The <span class="stt">data.rkt</span> file.</span></p></blockquote><p>This typed module provides a function called
<span class="RktSym">random-adders</span><span class="RktMeta"></span>
that generates a list of random &ldquo;adders,&rdquo;
functions that add its argument to a random number.
A file called <span class="stt">main.rkt</span> has the following code:</p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="http://docs.racket-lang.org/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="http://docs.racket-lang.org/reference/index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">racket/base</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"data.rkt"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">iterations</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1000</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5000</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/time.html#%28form._%28%28lib._racket%2Fprivate%2Fmore-scheme..rkt%29._time%29%29" class="RktStxLink" data-pltdoc="x">time</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._for%29%29" class="RktStxLink" data-pltdoc="x">for</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">i</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-range%29%29" class="RktValLink" data-pltdoc="x">in-range</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">iterations</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._for%2Fsum%29%29" class="RktStxLink" data-pltdoc="x">for/sum</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">f</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-list%29%29" class="RktValLink" data-pltdoc="x">in-list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">random-adders</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">f</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._random%29%29" class="RktValLink" data-pltdoc="x">random</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3auntyped-main))" x-target-lift="Figure"></a>Figure&nbsp;2: </span>The <span class="stt">main.rkt</span> file.</span></p></blockquote><p>This untyped module generates
a list of 5,000 adders from <span class="stt">data.rkt</span>
and computes a sum with them.
It does this for 1,000 iterations
and measures how long it takes.</p><p>Run the program and use Racket&rsquo;s profiler
to see the cost of contracts due to gradual typing.
On our machine,
the program takes about 10 seconds
with about 67% of that time due to contract checking.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">$ raco make data.rkt main.rkt</span></p></td></tr><tr><td><p><span class="stt">$ racket main.rkt</span></p></td></tr><tr><td><p><span class="stt">cpu time: 9398 real time: 9412 gc time: 874</span></p></td></tr><tr><td><p><span class="stt">$ raco contract-profile main.rkt</span></p></td></tr><tr><td><p><span class="stt">Running time is 66.66% contracts</span></p></td></tr><tr><td><p><span class="stt">8014/12022 ms</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(-&gt; natural? (listof (-&gt; exact-integer? any)))</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">8013.5 ms</span></p></td></tr><tr><td><p><span class="stt">data.rkt:3:9</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">random-adders</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">8013.5 ms</span></p></td></tr><tr><td><p><span class="stt">$ raco decompile main.rkt &gt; unopt.rkt</span></p></td></tr></table></p><p>Run SCV-CR on the modules first
and see the performance difference.
In this simple example,
the tool proves that the contracts
cannot be violated
and removes them all automatically.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">$ raco scv-cr data.rkt main.rkt</span></p></td></tr><tr><td><p><span class="stt">$ racket main.rkt</span></p></td></tr><tr><td><p><span class="stt">cpu time: 1256 real time: 1258 gc time: 28</span></p></td></tr><tr><td><p><span class="stt">$ raco contract-profile main.rkt</span></p></td></tr><tr><td><p><span class="stt">cpu time: 1406 real time: 1410 gc time: 8</span></p></td></tr><tr><td><p><span class="stt">Running time is 0% contracts</span></p></td></tr><tr><td><p><span class="stt">0/2340 ms</span></p></td></tr><tr><td><p><span class="stt">$ raco decompile main.rkt &gt; opt.rkt</span></p></td></tr></table></p><p>For further confirmation that the contracts were optimized,
you can compare the decompiled outputs in
<span class="stt">unopt.rkt</span>
and <span class="stt">opt.rkt</span>.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">$ diff opt.rkt unopt.rkt | grep "random-adders '5000" -A 2</span></p></td></tr><tr><td><p><span class="stt">&lt;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(let ((local67 (random-adders '5000)))</span></p></td></tr><tr><td><p><span class="stt">---</span></p></td></tr><tr><td><p><span class="stt">&gt;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(let ((local73 (lifted/12.1 '5000)))</span></p></td></tr></table></p><p>On top is the optimized version that directly calls <span class="stt">random-adders</span>.
The bottom,
by contrast,
calls <span class="stt">lifted/12.1</span> instead.
If you chase down this definition,
it is the contracted version of <span class="stt">random-adders</span>.</p><p>If SCV is unable to prove that a contract won&rsquo;t be violated,
then that contract is not removed.
A file called <span class="stt">main-imprecise.rkt</span> has the following code:</p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="http://docs.racket-lang.org/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="http://docs.racket-lang.org/reference/index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">racket/base</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"data.rkt"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">iterations</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1000</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5000</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/time.html#%28form._%28%28lib._racket%2Fprivate%2Fmore-scheme..rkt%29._time%29%29" class="RktStxLink" data-pltdoc="x">time</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._for%29%29" class="RktStxLink" data-pltdoc="x">for</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">i</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-range%29%29" class="RktValLink" data-pltdoc="x">in-range</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">iterations</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._for%2Fsum%29%29" class="RktStxLink" data-pltdoc="x">for/sum</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">f</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-list%29%29" class="RktValLink" data-pltdoc="x">in-list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">random-adders</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">f</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3c~3d~3f%29%29" class="RktValLink" data-pltdoc="x">string&lt;=?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"a"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"b"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._random%29%29" class="RktValLink" data-pltdoc="x">random</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">""</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3auntyped-main-imprecise))" x-target-lift="Figure"></a>Figure&nbsp;3: </span>The <span class="stt">main-imprecise.rkt</span> file.</span></p></blockquote><p>The only difference between
<span class="stt">main.rkt</span> and <span class="stt">main-imprecise.rkt</span>
is that the imprecise version contains a conditional
that will violate the type of <span class="stt">random-adders</span>
if the string <span class="RktInBG"><span class="hspace"></span><span class="RktIn">a</span><span class="hspace"></span></span>
is not lexicographically smaller
than the string <span class="RktInBG"><span class="hspace"></span><span class="RktIn">b</span><span class="hspace"></span></span>.
Since it is lexicographically smaller,
this branch is never executed
and the contract check is unnecessary.
However,
SCV cannot prove this is so,
and thus the contract is not removed.</p><p><div class="SIntrapara">This is reflected in the performance of the
&ldquo;optimized&rdquo; program;
the profiler also confirms
that the contract was not optimized away.
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">$ raco scv-cr data.rkt main-imprecise.rkt</span></p></td></tr><tr><td><p><span class="stt">$ racket main-imprecise.rkt</span></p></td></tr><tr><td><p><span class="stt">cpu time: 8041 real time: 8081 gc time: 550</span></p></td></tr><tr><td><p><span class="stt">$ raco contract-profile main-imprecise.rkt</span></p></td></tr><tr><td><p><span class="stt">cpu time: 9037 real time: 9172 gc time: 522</span></p></td></tr><tr><td><p><span class="stt">Running time is 72.02% contracts</span></p></td></tr><tr><td><p><span class="stt">7034/9767 ms</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(-&gt; natural? (listof (-&gt; exact-integer? any)))</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7034 ms</span></p></td></tr><tr><td><p><span class="stt">data.rkt:3:9</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">random-adders</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7034 ms</span></p></td></tr></table></div></p><p>See
<a href="corpse-reviver.html" data-pltdoc="x">the SCV-CR documentation</a>
for the full list of options to <span class="stt">raco scv-cr</span>.</p><h3>3<tt>&nbsp;</tt><a name="(part._benchmark)"></a>Benchmark</h3><p>Execute the following commands to
run the entire benchmark suite:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">$ cd corpse-reviver/corpse-reviver-artifact</span></p></td></tr><tr><td><p><span class="stt">$ raco scv-cr-benchmark -c 5 -b -i 5 -S 2 -R 2 -o data/baseline</span></p></td></tr><tr><td><p><span class="stt">$ raco scv-cr-benchmark -r -o data/opt</span></p></td></tr></table></p><p>These commands will create a series of
JSON-formatted measurement files&#8212;<wbr></wbr>one
for each benchmark sample.
Baseline measurements,
without applying SCV-CR,
are placed in <span class="stt">data/baseline</span>.
Measurements after applying SCV-CR
are placed in <span class="stt">data/opt</span>.</p><p>We have found that on a decent laptop,
the benchmarks with these parameters
terminate in about 14 hours.
If you want to run this script overnight,
combine the last two commands with
<span class="stt">&amp;&amp;</span>.</p><p>The suggested flags will sample from
larger benchmarks instead of
exhaustively measuring them all.
Different parameter choices will yield
different benchmarking times.
Changing <span class="stt">-R</span> from 2 to 1
will halve benchmark completion time.
We don&rsquo;t recommend going any lower than this setting.
If you want to run the benchmarks for longer,
increasing any one of
<span class="stt">-S</span>,
<span class="stt">-R</span>,
or <span class="stt">-c</span>,
will result in a more accurate result.
See
<a href="corpse-reviver-benchmark.html" data-pltdoc="x">the benchmarking documentation</a>
for more information.</p><p>After this is done,
you can generate this page
with your benchmark results.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">$ raco setup corpse-reviver-artifact</span></p></td></tr><tr><td><p><span class="stt">$ raco docs T:corpse-reviver-artifact</span></p></td></tr></table></p><p>When <span class="stt">raco docs</span> opens a browser,
select the first result.
The page you&rsquo;re currently reading should appear,
but the figures and claims in <a href="#%28part._results%29" data-pltdoc="x">Empirical results</a>
will be generated from your data instead
of ours (available in the
<span class="stt">author_data</span>
directory).</p><h3>4<tt>&nbsp;</tt><a name="(part._results)"></a>Empirical results</h3><p>Compare the figures and claims
generated from your benchmarking results
to those generated from ours.
Depending on your choice of parameters,
the results may differ more or less.
However,
they should generally support
the thesis of the paper&#8212;<wbr></wbr>that
across a wide range of benchmarks,
contract verification can effectively
reduce the performance overhead
of sound gradual typing.</p><h4>4.1<tt>&nbsp;</tt><a name="(part._.Figures)"></a>Figures</h4><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="pict.svg" type="image/svg+xml"/></p></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._overhead-summary))" x-target-lift="Figure"></a>Figure&nbsp;4: </span>Overhead of gradual typing over the whole benchmark suite.
The purple (<img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_2.svg" type="image/svg+xml"/>) curve is Typed Racket
and the orange (<img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_3.svg" type="image/svg+xml"/>) curve is SCV-CR.
The log-scaled x-axis indicates slowdown factor
compared against the
fully-untyped configuration,
while the y-axis indicates the
percent of configurations incurring that slowdown.
Each benchmark is allocated
an equal proportion of the y-axis.
Higher is better.</span></p></blockquote><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="pict_4.svg" type="image/svg+xml"/></p></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3alattices))" x-target-lift="Figure"></a>Figure&nbsp;5: </span>Performance lattices for
<span class="CapsSmall">sieve</span> (left)
and <span class="CapsSmall">zombie</span> (right).
Each point in the lattice
is a configuration of the benchmark,
where a white box is an untyped module
and a black box is a typed module.
The numbers below indicate the slowdown factor for
Typed Racket 7.8 on the left
and SCV-CR on the right.</span></p></blockquote><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="pict_5.svg" type="image/svg+xml"/></p></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3aoverhead-grid))" x-target-lift="Figure"></a>Figure&nbsp;6: </span>Overhead of gradual typing for each benchmark individually.
The purple curve is Typed Racket and the orange curve is SCV-CR.
Each point (x, y) indicates an x-factor slowdown
over the fully-untyped configuration for y% of configurations.
The dashed lines between 1 and 2 occur at increments of 0.2
and between 2 and 10 at increments of 2.</span></p></blockquote><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="pict_6.svg" type="image/svg+xml"/></p></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3aexact-grid))" x-target-lift="Figure"></a>Figure&nbsp;7: </span>Exact time it takes each configuration to execute.
The purple curve is Typed Racket and the orange curve is SCV-CR.
The x-axis is binned by the number of typed modules in a configuration.
The y-axis is time to execute in seconds.</span></p></blockquote><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td align="center"><p></p></td><td align="center" colspan="2"><p>Racket Overhead</p></td><td align="center" colspan="2"><p>SCV-CR Overhead</p></td><td align="center"><p>SCV-CR Analyze</p></td><td align="center"><p>SCV-CR Compile</p></td></tr><tr><td align="center"><p>Benchmark</p></td><td align="center"><p>Max</p></td><td align="center"><p>Mean</p></td><td align="center"><p>Max</p></td><td align="center"><p>Mean</p></td><td align="center"><p>Mean &#177; &#120590; (s)</p></td><td align="center"><p>Mean &#177; &#120590; (s)</p></td></tr><tr><td align="center"><p><span class="CapsSmall">fsm</span></p></td><td align="center"><p>2.8&#215;</p></td><td align="center"><p>1.7&#215;</p></td><td align="center"><p>1.1&#215;</p></td><td align="center"><p>0.7&#215;</p></td><td align="center"><p>25 &#177; 3</p></td><td align="center"><p>16 &#177; 4</p></td></tr><tr><td align="center"><p><span class="CapsSmall">gregor</span></p></td><td align="center"><p>2.1&#215;</p></td><td align="center"><p>1.7&#215;</p></td><td align="center"><p>1.3&#215;</p></td><td align="center"><p>1.1&#215;</p></td><td align="center"><p>879 &#177; 858</p></td><td align="center"><p>52 &#177; 11</p></td></tr><tr><td align="center"><p><span class="CapsSmall">kcfa</span></p></td><td align="center"><p>4.3&#215;</p></td><td align="center"><p>2.5&#215;</p></td><td align="center"><p>1.1&#215;</p></td><td align="center"><p>1&#215;</p></td><td align="center"><p>35 &#177; 3</p></td><td align="center"><p>34 &#177; 4</p></td></tr><tr><td align="center"><p><span class="CapsSmall">lnm</span></p></td><td align="center"><p>1.1&#215;</p></td><td align="center"><p>0.8&#215;</p></td><td align="center"><p>1&#215;</p></td><td align="center"><p>0.7&#215;</p></td><td align="center"><p>125 &#177; 16</p></td><td align="center"><p>44 &#177; 6</p></td></tr><tr><td align="center"><p><span class="CapsSmall">morsecode</span></p></td><td align="center"><p>1.8&#215;</p></td><td align="center"><p>1.2&#215;</p></td><td align="center"><p>1&#215;</p></td><td align="center"><p>0.9&#215;</p></td><td align="center"><p>18 &#177; 9</p></td><td align="center"><p>10 &#177; 3</p></td></tr><tr><td align="center"><p><span class="CapsSmall">sieve</span></p></td><td align="center"><p>18.6&#215;</p></td><td align="center"><p>6.4&#215;</p></td><td align="center"><p>1&#215;</p></td><td align="center"><p>1&#215;</p></td><td align="center"><p>5 &#177; 2</p></td><td align="center"><p>4 &#177; 2</p></td></tr><tr><td align="center"><p><span class="CapsSmall">snake</span></p></td><td align="center"><p>16.4&#215;</p></td><td align="center"><p>8.2&#215;</p></td><td align="center"><p>1.6&#215;</p></td><td align="center"><p>1&#215;</p></td><td align="center"><p>94 &#177; 43</p></td><td align="center"><p>22 &#177; 4</p></td></tr><tr><td align="center"><p><span class="CapsSmall">suffixtree</span></p></td><td align="center"><p>32.1&#215;</p></td><td align="center"><p>14.1&#215;</p></td><td align="center"><p>1&#215;</p></td><td align="center"><p>0.8&#215;</p></td><td align="center"><p>28 &#177; 12</p></td><td align="center"><p>21 &#177; 4</p></td></tr><tr><td align="center"><p><span class="CapsSmall">synth</span></p></td><td align="center"><p>73.6&#215;</p></td><td align="center"><p>32.6&#215;</p></td><td align="center"><p>1.4&#215;</p></td><td align="center"><p>1.1&#215;</p></td><td align="center"><p>131 &#177; 51</p></td><td align="center"><p>34 &#177; 6</p></td></tr><tr><td align="center"><p><span class="CapsSmall">tetris</span></p></td><td align="center"><p>11.1&#215;</p></td><td align="center"><p>5&#215;</p></td><td align="center"><p>1.3&#215;</p></td><td align="center"><p>1&#215;</p></td><td align="center"><p>190 &#177; 128</p></td><td align="center"><p>25 &#177; 6</p></td></tr><tr><td align="center"><p><span class="CapsSmall">zombie</span></p></td><td align="center"><p>59.8&#215;</p></td><td align="center"><p>27.8&#215;</p></td><td align="center"><p>1.3&#215;</p></td><td align="center"><p>1.1&#215;</p></td><td align="center"><p>55 &#177; 19</p></td><td align="center"><p>15 &#177; 4</p></td></tr><tr><td align="center"><p><span class="CapsSmall">zordoz</span></p></td><td align="center"><p>3.9&#215;</p></td><td align="center"><p>1.8&#215;</p></td><td align="center"><p>1&#215;</p></td><td align="center"><p>0.9&#215;</p></td><td align="center"><p>361 &#177; 8</p></td><td align="center"><p>66 &#177; 8</p></td></tr></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._table~3asummary))" x-target-lift="Figure"></a>Figure&nbsp;8: </span>Maximum and mean overhead for
Racket 7.8
and SCV-CR
for each benchmark.
Red indicates a slowdown &#8805;3&#215;
while green indicates a slowdown &#8804;1.3&#215;.</span></p></blockquote><h4>4.2<tt>&nbsp;</tt><a name="(part._.Supporting_claims)"></a>Supporting claims</h4><ul><li><p>We evaluate this approach on a dozen existing gradually-typed
programs previously shown to have prohibitive performance overhead&#8212;<wbr></wbr>with
a median overhead of 2.1&#215; and up to
73.6&#215; in the worst case&#8212;<wbr></wbr>and
eliminate all overhead in most cases and suffer
1.6&#215; in the worst case.</p></li><li><p>For example,
Typed Racket 7.8 runs 50% of benchmark configurations
with less than 2&#215; slowdown.
With SCV-CR,
95% of benchmark configurations have less than
1.2&#215; slowdown compared to the fully-untyped configuration.
As this plot makes clear,
SCV-CR reduces overhead to nearly zero in almost all cases,
and completely eliminates all overheads over 1.6&#215;.</p></li><li><p>The worst overhead incurred
by gradual typing with SCV-CR
is a slowdown of 1.6&#215;.
Only 44% of benchmark configurations without
contract verification are within this slowdown factor,
while the largest overhead exceeds 73.6&#215; overhead.</p></li><li><p>Take the <span class="CapsSmall">sieve</span> benchmark as an example.
The baseline performance begins at 50%,
meaning two of the four
configurations are within a 1&#215; slowdown
of the fully-untyped configuration.
From <a href="#%28counter._%28figure._fig~3alattices%29%29" data-pltdoc="x">figure&nbsp;<span class="FigureRef">5</span></a>, these are the fully-untyped
configuration itself and the fully-typed configuration.
The one-time increase in the CDF shows the configuration
that has 5&#215; overhead.
We never see the CDF reach 100% since
this would occur at 18.6&#215;,
beyond the x-axis&rsquo;s range.</p></li><li><p>There are no pathological cases
and any path through the lattice of configurations
from untyped to typed programs exhibit
at most 1.6&#215; slowdown.</p></li></ul></div></div><div id="contextindicator">&nbsp;</div></body></html>